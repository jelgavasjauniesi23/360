<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360¬∞ Virtual Tour</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="vr-button.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <h1>360¬∞ Virtual Tour</h1>
            <div class="controls">
                <button id="devModeBtn" class="btn btn-secondary">Dev Mode</button>
                <button id="vrBtn" class="btn btn-primary">VR Mode</button>
            </div>
        </header>

        <!-- Folder Navigation -->
        <nav class="folder-nav">
            <h3>Select Tour:</h3>
            <div class="folder-list">
                <button class="folder-btn active" data-folder="pakapiens">Pakapiens</button>
                <button class="folder-btn" data-folder="pietura">Pietura</button>
                <button class="folder-btn" data-folder="spaktele">Spaktele</button>
            </div>
        </nav>

        <!-- Main Viewer -->
        <div id="viewer-container">
            <canvas id="viewer"></canvas>
            
            <!-- Navigation Controls -->
            <div class="navigation-controls">
                <button id="prev-image" class="nav-btn prev-btn" title="Previous Image">‚Äπ</button>
                <button id="next-image" class="nav-btn next-btn" title="Next Image">‚Ä∫</button>
                <div class="image-counter">
                    <span id="current-image-num">1</span> / <span id="total-images">0</span>
                </div>
            </div>
            
            <!-- Hotspot Overlay -->
            <div id="hotspot-overlay"></div>
            
            <!-- Dev Mode Controls -->
            <div id="dev-controls" class="dev-controls hidden">
                <h4>Dev Mode - Add Hotspots</h4>
                <p>Click on the image to add a hotspot</p>
                <div class="hotspot-form">
                    <input type="text" id="hotspot-title" placeholder="Hotspot Title" />
                    <textarea id="hotspot-description" placeholder="Hotspot Description"></textarea>
                    <div class="hotspot-linking">
                        <label for="hotspot-link-type">Link Type:</label>
                        <select id="hotspot-link-type">
                            <option value="info">Information Only</option>
                            <option value="image">Navigate to Image</option>
                        </select>
                        <select id="hotspot-target-image" style="display: none;">
                            <option value="">Select target image...</option>
                        </select>
                    </div>
                    <button id="save-hotspot" class="btn btn-primary">Save Hotspot</button>
                    <button id="cancel-hotspot" class="btn btn-secondary">Cancel</button>
                </div>
            </div>

            <!-- Photo Ordering -->
            <div id="photo-ordering" class="photo-ordering hidden">
                <h4>Photo Ordering</h4>
                <div class="photo-list">
                    <!-- Photos will be dynamically loaded here -->
                </div>
                <button id="save-order" class="btn btn-primary">Save Order</button>
            </div>
        </div>

        <!-- Hotspot Info Modal -->
        <div id="hotspot-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3 id="hotspot-modal-title"></h3>
                <p id="hotspot-modal-description"></p>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p id="loading-text">Loading 360¬∞ image...</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <div id="progress-text" class="progress-text">0%</div>
            </div>
            <div id="loading-details" class="loading-details"></div>
        </div>

        <!-- Instructions Overlay -->
        <div id="instructions-overlay" class="instructions-overlay">
            <div class="instructions-content">
                <h3>Welcome to the 360¬∞ Virtual Tour!</h3>
                <div class="instructions-grid">
                    <div class="instruction-item">
                        <strong>üñ±Ô∏è Mouse Controls:</strong>
                        <p>Drag to look around ‚Ä¢ Scroll to zoom</p>
                    </div>
                    <div class="instruction-item">
                        <strong>‚å®Ô∏è Keyboard:</strong>
                        <p>Arrow keys or Spacebar to navigate ‚Ä¢ H for help</p>
                    </div>
                    <div class="instruction-item">
                        <strong>ü•Ω VR Support:</strong>
                        <p>Click "VR Mode" if you have VR equipment</p>
                    </div>
                    <div class="instruction-item">
                        <strong>üìç Hotspots:</strong>
                        <p>Click the + icons to view information</p>
                    </div>
                </div>
                <button id="close-instructions" class="btn btn-primary">Got it!</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
